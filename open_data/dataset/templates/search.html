{% extends 'base.html' %}
{% load static %}
{% block title %}Recherche{% endblock %}
{% block head %}
  <script defer src="{% static 'flickity-2.2.2/flickity.pkgd.min.js' %}"></script>
  <link rel="stylesheet" href="{% static 'flickity-2.2.2/flickity.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/carousel.css' %}">
  <style>
    .datasets {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .dataset {
      display: flex !important;
      align-items: center;
      gap: 4px;
    }

    .dataset > .image {
      height: 48px;
      width: 48px;
    }
  </style>
{% endblock %}
{% block main %}
  <p>
    Il y a <b>{{ nb_datasets }} jeu{{ nb_datasets|pluralize:'x' }} de données</b>.
  </p>
  {% for keywords, datasets in datasets_by_keyword %}
    <p>
      Voici le{{ datasets|pluralize }}
      résultat{{ datasets|pluralize }}
      correspondant au{{ keywords|pluralize:'x' }}
      mot{{ keywords|pluralize }}
      : <b>{{ keywords|join:', ' }}</b>.
    </p>
    <div class="datasets">
      {% for dataset in datasets %}
        <a class="dataset button" href="{% url 'dataset' dataset_id=dataset.id %}">
          {% if dataset.theme.image %}
            <div
              class="svg image"
              data-src="{{ dataset.theme.image.url }}"
              data-color="currentColor"
            ></div>
          {% endif %}
          <div>{{ dataset.multiline_title }}</div>
        </a>
      {% endfor %}
      {#% include "dataset_carousel.html" with datasets=datasets %#}
      {#            {% for dataset in datasets %}#}
      {#                <li><a href="{% url 'dataset' dataset_id=dataset.id %}">{{ dataset.title }}</a></li>#}
      {#            {% endfor %}#}
    </div>
  {% endfor %}
{% endblock %}
