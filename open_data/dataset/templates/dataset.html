{% extends 'base.html' %}
{% block title %}{{ dataset.title }}{% endblock %}
{% block head %}
  <style>
    main {
        --page-width: 100%;
    }

    iframe {
      width: 100%;
      height: calc(100vh - 9rem);
      border: none;
    }

    .button-tabs {
        display: flex;
        align-items: center;
    }

    .button-tabs > * + * {
        margin-left: 4px;
    }

    .separator {
        flex: 1;
    }
  </style>
{% endblock %}
{% block main %}
  <div class="button-tabs">
    {% for type, class, _ in dataset.iframes %}
    <button class="{% if forloop.first %}active {% endif %}{{ type }}-tab-button">
      <i class="{{ class }}"></i>
    </button>
    {% endfor %}
    {% if 'xls' in dataset.exports %}
    <a class="button" href="{{ dataset.exports.xls }}"><i class="fas fa-download"></i></a>
    {% endif %}
    <div class="separator"></div>
    <form action="{% url 'toggle_like' dataset_id=dataset.id %}" method="post">
      {% csrf_token %}
      <button>
        {% if dataset in user.profile.liked_datasets.all %}
        <i class="fas fa-heart"></i>
        {% else %}
        <i class="far fa-heart"></i>
        {% endif %}
        <span>{{ dataset.liking_users.count }}</span>
      </button>
    </form>
    <button>
      <i class="fas fa-comment"></i>
      4
    </button>
    <button>
      Quiz
      <i class="fas fa-question"></i>
    </button>
  </div>
  <div class="tabs">
    {% for type, _, url in dataset.iframes %}
    <div id="{{ type }}-tab" class="{% if forloop.first %}active {% endif %}tab">
      <iframe src="{{ url }}"></iframe>
    </div>
    {% endfor %}
  </div>
{% endblock %}