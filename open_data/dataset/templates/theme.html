{% extends 'base.html' %}
{% load static %}
{% block title %}{{ theme.name }}{% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/theme.css' %}">
{% endblock %}
{% block main %}
<a href="/">Accueil <i class="fas fa-home"></i></a> > <a href="/data/theme/{{ theme.id }}">{{ theme.name }}</a>
<h1>{{ theme.name }}</h1>
<div class="container">
      <div class="theme">
          {% if theme.image %}
          <div class="theme-image">
            <!-- TODO: Faut peut-être refactor le style avec le fichier css-->
            <img class="svg theme-image" src="url({{ theme.image.url }})" style="--image-src: url({{ theme.image.url }}); --image-color: {{ theme.color }}">
          </div>
          {% endif %}
          <div class="theme-presentation">
            <button class="btn theme-subscribe-btn">S'abonner</button>
          </div>
          <div class="theme-stats">
              <ul>
                  <li><span class="theme-stat-count">{{ theme.datasets.count }}</span> datasets</li>
                  <li><span class="theme-stat-count">{{ theme.subscribed_users.count }}</span> abonnés</li>
              </ul>
          </div>
          <div class="theme-description">
              <p>Cette catégorie reprend tous les datasets du thème {{theme.name}}</p>
          </div>
      </div>
</div>
<div class="container">
        <div class="gallery">
          {% for dataset in theme.datasets.all %}
          <div class="gallery-item" tabindex="{{ forloop.counter }}" onclick="location.href='{% url 'dataset' dataset_id=dataset.id %}';">
            {% if theme.image %}
            <div class="imgBx1">
              <!--Faut peut-être refactor le style avec le fichier css-->
              <img class="svg theme-image" src="url({{ theme.image.url }})" style="--image-src: url({{ theme.image.url }}); --image-color: {{ theme.color }}">
            </div>
            {% endif %}
            <div class="dataset-title">
              <h2>{{ dataset.title }}</h2>
            </div>
            <div class="data-stats">
              <ul>
                <li> <span class="fa fa-heart"></span> <span class="data-stat-count">{{ dataset.liking_users.count }}</span></li>
                <li> <span class="fa fa-comment"></span> <span class="data-stat-count">{{ dataset.comments.count }}</span></li>
                <li> <span class="fa fa-download"></span> <span class="data-stat-count">{{ dataset.nb_downloads_total }}</span></li>
              </ul>
            </div><br>
            <div class="content1">
              <p> Cliquez sur la vignette pour avoir plus d'informations </p>
              <div class="sub-information">
                <h3>Date de dernière modification : </h3>
                <span>{{ dataset.modified }}</span>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
</div>
{% endblock %}
